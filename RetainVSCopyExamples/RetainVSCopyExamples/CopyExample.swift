//
//  CopyExample.swift
//  RetainVSCopyExamples
//
//  Created by Nino Kurshavishvili on 30.05.25.
//

import Foundation

//­ЪДЕ copy
/*
 рЃЊрЃљрЃЋрЃБрЃерЃЋрЃљрЃЌ рЃерЃћрЃЋрЃЦрЃЏрЃћрЃюрЃўрЃЌ custom рЃЎрЃџрЃљрЃАрЃА рЃАрЃбрЃарЃўрЃюрЃњрЃўрЃЌ, рЃарЃЮрЃЏрЃџрЃўрЃА рЃњрЃљрЃарЃћрЃЊрЃљрЃю рЃЏрЃБрЃбрЃљрЃфрЃўрЃљрЃф рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ, рЃЌрЃБ рЃљрЃа рЃЊрЃљрЃЎрЃЮрЃърЃўрЃарЃЊрЃћрЃЉрЃљ.
 */



import UIKit

// 2№ИЈРЃБ. рЃерЃћрЃЋрЃЦрЃЏрЃћрЃюрЃўрЃЌ custom рЃЎрЃџрЃљрЃАрЃў рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃўрЃдрЃћрЃЉрЃА NSCopying - рЃърЃарЃЮрЃбрЃЮрЃЎрЃЮрЃџрЃА.
// рЃљрЃюрЃБ рЃерЃћрЃю рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљ рЃ«рЃћрЃџрЃўрЃЌ рЃњрЃљрЃБрЃгрЃћрЃарЃЮ рЃЊрЃљ рЃўрЃАрЃћ рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃЮ рЃарЃЮрЃњрЃЮрЃа рЃерЃћрЃЦрЃЏрЃюрЃљ рЃерЃћрЃюрЃў рЃЎрЃџрЃљрЃАрЃўрЃА рЃЎрЃЮрЃърЃўрЃљ.

class Task: NSCopying {
    var title: String = ""

    //copy(with - рЃЦрЃЏрЃюрЃўрЃА рЃљрЃ«рЃљрЃџ рЃўрЃюрЃАрЃбрЃљрЃюрЃАрЃА
    func copy(with zone: NSZone? = nil) -> Any {
        let copy = Task()
        //рЃЏрЃўрЃЋрЃљрЃюрЃўрЃГрЃћрЃЌ рЃљрЃЏ рЃљрЃ«рЃљрЃџ рЃўрЃюрЃАрЃбрЃљрЃюрЃАрЃА рЃўрЃњрЃўрЃЋрЃћ рЃАрЃљрЃ«рЃћрЃџрЃў (title).
        copy.title = self.title
        //рЃЊрЃљрЃЋрЃљрЃЉрЃарЃБрЃюрЃћрЃЌ рЃўрЃюрЃАрЃбрЃљрЃюрЃАрЃўрЃА рЃЎрЃЮрЃърЃўрЃљ
        return copy
    }
    //рЃљрЃЏрЃўрЃА рЃЎрЃћрЃЌрЃћрЃЉрЃљ рЃЊрЃљрЃњрЃЋрЃГрЃўрЃарЃЊрЃљ рЃарЃљрЃЊрЃњрЃљрЃю Swift-рЃЏрЃљ рЃљрЃа рЃўрЃфрЃўрЃА рЃарЃЮрЃњрЃЮрЃа рЃЊрЃљрЃљрЃЎрЃЮрЃърЃўрЃарЃЮрЃА рЃЎрЃџрЃљрЃАрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ, рЃарЃљрЃЊрЃњрЃљрЃю рЃЎрЃџрЃљрЃАрЃў рЃарЃћрЃцрЃћрЃарЃћрЃюрЃА рЃбрЃўрЃърЃўрЃљ.
}

// 1№ИЈРЃБ. рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА viewmodel-рЃў NSMutableString рЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃЌ ?

class MyViewModel {
    private var internalString: NSMutableString

    //рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃћрЃарЃў рЃўрЃдрЃћрЃЉрЃА mutable рЃАрЃбрЃарЃўрЃюрЃњрЃА рЃЊрЃљ рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЏрЃљрЃА рЃљрЃарЃљ рЃарЃЮрЃњрЃЮрЃарЃф рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃарЃћрЃцрЃћрЃарЃћрЃюрЃюрЃА рЃљрЃарЃљрЃЏрЃћрЃЊ рЃарЃЮрЃњрЃЮрЃарЃф рЃЎрЃЮрЃърЃўрЃљрЃА
    //рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА рЃарЃЮрЃЏ рЃЮрЃарЃўрЃњрЃўрЃюрЃљрЃџрЃў рЃАрЃбрЃарЃўрЃюрЃњрЃўрЃф рЃЊрЃљ рЃўрЃюрЃбрЃћрЃарЃюрЃљрЃџ рЃАрЃбрЃарЃўрЃюрЃњрЃўрЃф рЃљрЃарЃўрЃА рЃЮрЃарЃў рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃБрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљрЃерЃў.
    //рЃфрЃ«рЃљрЃЊрЃўрЃљ рЃЌрЃБ рЃЮрЃарЃўрЃњрЃўрЃюрЃљрЃџрЃў рЃАрЃбрЃарЃўрЃюрЃњрЃў рЃерЃћрЃўрЃфрЃЋрЃџрЃћрЃЉрЃљ рЃЎрЃЮрЃърЃўрЃљ рЃљрЃа рЃерЃћрЃўрЃфрЃЋрЃџрЃћрЃЉрЃљ.
    init(title: NSMutableString) {
        self.internalString = title.copy() as! NSMutableString
    }

    func printTitle() {
        print(internalString)
    }
}

class CopyExampleViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        let mutable = NSMutableString(string: "Original")
        let viewModel = MyViewModel(title: mutable)
        mutable.setString("Changed")
        viewModel.printTitle()
        
        let task1 = Task()
        task1.title = "Workout"
        let task2 = task1.copy() as! Task
        task2.title = "Yoga"
        
        print(task1.title)
        print(task2.title)
    }
}
