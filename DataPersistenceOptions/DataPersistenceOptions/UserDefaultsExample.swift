//
//  UserDefaultsExample.swift
//  DataPersistenceOptions
//
//  Created by Nino Kurshavishvili on 25.06.25.
//

import Foundation
import SwiftUI

//рЃарЃљ рЃљрЃарЃўрЃА UserDefaults

/*
 UserDefaults - рЃљрЃарЃўрЃА рЃЏрЃљрЃарЃбрЃўрЃЋрЃў рЃЊрЃљ рЃЏрЃАрЃБрЃЉрЃБрЃЦрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃерЃћрЃюрЃљрЃ«рЃЋрЃўрЃА рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃў. рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃЏрЃфрЃўрЃарЃћ рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃўрЃЌ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ Preference-рЃЉрЃў рЃљрЃю рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃўрЃА seting-рЃћрЃЉрЃў, UserDefault- рЃЏрЃљрЃарЃбрЃўрЃЋрЃў рЃЊрЃљ рЃЏрЃЮрЃАрЃљрЃ«рЃћрЃарЃ«рЃћрЃЉрЃћрЃџрЃў рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃўрЃљ рЃљрЃАрЃћрЃЌрЃў рЃЊрЃљрЃбрЃљрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃўрЃАрЃЌрЃЋрЃўрЃА.
 
 рЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃерЃћрЃАрЃљрЃюрЃљрЃ«рЃљрЃЊ рЃњрЃЋрЃЌрЃЋрЃљрЃќрЃЮрЃЉрЃА key-value рЃгрЃДрЃЋрЃўрЃџрЃўрЃА рЃЏрЃўрЃЊрЃњрЃЮрЃЏрЃљрЃА. UserDefault- рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃљрЃарЃљрЃАрЃћрЃюрЃАрЃўрЃбрЃўрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃюрЃљрЃ«рЃљрЃЊ, рЃЊрЃљ рЃљрЃа рЃљрЃарЃўрЃА рЃерЃћрЃАрЃљрЃцрЃћрЃарЃўрЃАрЃў рЃЊрЃўрЃЊрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃљрЃю рЃЊрЃўрЃЊрЃў рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃюрЃљрЃ«рЃљрЃЊ (рЃљрЃЏрЃўрЃАрЃЌрЃЋрЃўрЃА CoreData рЃљрЃю Realm рЃљрЃю file system рЃљрЃарЃўрЃА рЃБрЃцрЃарЃЮ рЃњрЃљрЃЏрЃЮрЃАрЃљрЃЊрЃћрЃњрЃў).
 
 рЃЊрЃљрЃЊрЃћрЃЉрЃўрЃЌрЃў рЃюрЃљрЃгрЃўрЃџрЃў: 1) рЃАрЃўрЃЏрЃљрЃарЃбрЃўрЃЋрЃћ - рЃљрЃарЃўрЃА рЃЏрЃљрЃарЃўрЃбрЃўрЃЋрЃў рЃњрЃљрЃЏрЃЮрЃАрЃљрЃДрЃћрЃюрЃћрЃЉрЃћрЃџрЃў рЃЊрЃљ рЃљрЃЦрЃЋрЃА рЃЏрЃљрЃарЃбрЃўрЃЋрЃў рЃАрЃўрЃюрЃбрЃљрЃЦрЃАрЃў, рЃарЃљрЃф рЃЏрЃљрЃА рЃўрЃЊрЃћрЃљрЃџрЃБрЃарЃА рЃ«рЃЊрЃўрЃА рЃЏрЃљрЃарЃбрЃўрЃЋрЃљрЃЊ рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃюрЃљрЃ«рЃљрЃЊ.
 2) рЃЏрЃЊрЃњрЃарЃљрЃЊрЃЮрЃЉрЃљ - UserDefault-рЃерЃў рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃерЃћрЃюрЃљрЃарЃЕрЃБрЃюрЃћрЃЉрЃБрЃџрЃўрЃљ рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљрЃАрЃљ рЃЊрЃљ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃўрЃА рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњрЃљрЃф.
 3) UserDefault- рЃљрЃа рЃћрЃДрЃарЃЊрЃюрЃЮрЃЉрЃљ рЃњрЃљрЃарЃћ рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃћрЃЉрЃА рЃљрЃю рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЎрЃћрЃЉрЃА рЃўрЃА рЃљрЃарЃўрЃА Build In feature.
 */

// рЃарЃЮрЃњрЃЮрЃа рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃЮрЃЌ UserDefaults
/*
 рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ рЃљрЃарЃљрЃцрЃарЃўрЃА рЃўрЃЏрЃърЃЮрЃарЃбрЃў рЃљрЃа рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ рЃЏрЃљрЃњрЃўрЃАрЃЌрЃЋрЃўрЃА, Foundation-рЃА рЃЏрЃЮрЃДрЃЋрЃћрЃЉрЃљ.
 */

// MARK: - ­ЪДф Example Usage
//saves Data
func storeSampleUserDefaultsData() {
    UserDefaults.standard.set("Nini", forKey: "username")
    UserDefaults.standard.set(true, forKey: "isLoggedIn")
    UserDefaults.standard.set(22, forKey: "userAge")
}
// рЃћрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА 3 key value=("Nini", true, 22) рЃгрЃДрЃЋрЃўрЃџрЃА.
// UserDefaults.standard.set рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃА userdefault-рЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃЉрЃљрЃќрЃљрЃерЃў, рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў key-рЃўрЃА рЃЦрЃЋрЃћрЃе.           рЃЌрЃБ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ рЃљрЃарЃўрЃА nil, рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃерЃџрЃўрЃА рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃўрЃА рЃљрЃарЃАрЃћрЃЉрЃБрЃџ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљрЃА.
/*
 UserDefaultsрЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃерЃћрЃЏрЃЊрЃћрЃњрЃў рЃбрЃўрЃърЃћрЃЉрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ рЃерЃћрЃФрЃџрЃўрЃљ:
 String
 Int
 Bool
 Double
 Float
 URL
 Date
 Data
 ArrayрЃЊрЃљ Dictionary(рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЏрЃљрЃерЃю рЃЌрЃБ рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃќрЃћрЃЏрЃЮрЃЌ рЃЕрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃўрЃџ рЃбрЃўрЃърЃћрЃЉрЃА)

 РЮї рЃЏрЃљрЃА рЃљрЃа рЃерЃћрЃБрЃФрЃџрЃўрЃљ custom рЃбрЃўрЃърЃћрЃЉрЃўрЃА рЃљрЃю рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ. рЃЌрЃЦрЃЋрЃћрЃю рЃЊрЃљрЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљрЃЌ рЃЏрЃљрЃЌрЃў рЃЎрЃЮрЃюрЃЋрЃћрЃарЃбрЃљрЃфрЃўрЃљ DataрЃљрЃю Codable -рЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ.


 */

//Loads Data
func loadSampleUserDefaultsData() {
    let name = UserDefaults.standard.string(forKey: "username") ?? "Unknown"
    let isLoggedIn = UserDefaults.standard.bool(forKey: "isLoggedIn")
    let age = UserDefaults.standard.integer(forKey: "userAge")
    
    print("Name: \(name)")
    print("Is Logged In: \(isLoggedIn)")
    print("Age: \(age)")
}

struct UserDefaultsExampleView: View {
    @AppStorage("username") var username: String = "DefaultUser"
    @AppStorage("isLoggedIn") var isLoggedIn: Bool = false
    
    var body: some View {
        VStack(spacing: 20) {
            Text("­ЪЉІ Hello, \(username)")
                .font(.headline)
            
            Toggle("Logged In?", isOn: $isLoggedIn)
            
            Button("Change Name") {
                username = "Nini \(Int.random(in: 1...99))"
            }
        }
        .padding()
    }
}

/*
 struct-рЃерЃў рЃ«рЃЊрЃћрЃЉрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњрЃў рЃарЃљрЃЏ:
 рЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ @AppStorage-рЃА - рЃўрЃА рЃљрЃарЃўрЃА property wrapper SwiftUI-рЃерЃў, рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ UserDefault-рЃерЃў рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃгрЃљрЃАрЃљрЃЎрЃўрЃЌрЃ«рЃљрЃЊ, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃўрЃФрЃљрЃ«рЃћрЃЉрЃљ рЃЋрЃўрЃБрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃАрЃљрЃА рЃДрЃЮрЃЋрЃћрЃџ рЃ»рЃћрЃарЃќрЃћ рЃЊрЃљ рЃЏрЃЮрЃљрЃЦрЃЋрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃћрЃЉрЃў. рЃљрЃюрЃБ рЃўрЃА рЃљрЃЦрЃбрЃўрЃБрЃарЃљрЃЊ рЃљрЃЎрЃЋрЃўрЃарЃЊрЃћрЃЉрЃљ UserDefault-рЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџ key-рЃћрЃЉрЃА рЃЊрЃљ рЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃАрЃЌрЃЋрЃўрЃА.
 
 рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ @AppStorage("username") var username: String = "DefaultUser" рЃћрЃА рЃЊрЃљрЃљрЃЎрЃЋрЃўрЃарЃЊрЃћрЃЉрЃљ "username" key-рЃА рЃЊрЃљ рЃЊрЃљрЃљрЃЎрЃЋрЃўрЃарЃЊрЃћрЃЉрЃљ рЃЊрЃљ рЃЊрЃљрЃўрЃГрЃћрЃарЃА рЃЏрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљрЃА рЃдрЃўрЃџрЃљрЃЎрЃўрЃА рЃДрЃЮрЃЋрЃћрЃџ рЃЊрЃљрЃГрЃћрЃарЃљрЃќрЃћ. [рЃўрЃАрЃћрЃЋрЃћ рЃарЃЮрЃњрЃЮрЃарЃф @AppStorage("isLoggedIn") var isLoggedIn: Bool = false "isLoggedIn" key-рЃА.] рЃарЃЮрЃњрЃЮрЃарЃф рЃЎрЃў рЃерЃћрЃўрЃфрЃЋрЃџрЃћрЃЉрЃљ
 
 Рџа№ИЈрЃЌрЃБрЃЏрЃфрЃљ, @AppStorage - (writes Data) рЃњрЃўрЃгрЃћрЃарЃА рЃЊрЃљрЃбрЃљрЃА UserDefault-рЃерЃў рЃЊрЃљ рЃљрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮ рЃўрЃА рЃљрЃа рЃљрЃарЃўрЃА рЃЊрЃљрЃфрЃЋрЃБрЃџрЃў Storage-рЃў. рЃљрЃЏрЃўрЃбрЃЮрЃЏрЃљрЃф рЃљрЃарЃљрЃАрЃЮрЃЊрЃћрЃА рЃерЃћрЃўрЃюрЃљрЃ«рЃЮрЃЌ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃърЃћрЃарЃАрЃЮрЃюрЃљрЃџрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ @AppStorage-рЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃЌ.
 */
